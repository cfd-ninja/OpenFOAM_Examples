/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  v2306                                 |
|   \\  /    A nd           | Website:  www.openfoam.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      blockMeshDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

scale   1.0; // Масштабный множитель, на который умножаются значения вершин

H 6.283184; // Высота цилиндра
R 1.0; // Радиус

// arc_R - используется для вычисления точек на дуге окружности
// Эти точки используются при построении ребер, чтобы получить цилиндр
// $R и т.д. это макро-подстановка, т.е. вместо $R подставляется значение
arc_R #calc "cos(3.141593/4.0) * $R";

// Число разбиений вдоль соотв. осей координат
Nx 20;
Ny 20;
Nz 20;

// Перечисление вершин
vertices
(
    // Нижнее основание цилиндра
    (-$R 0 0) //0
    (0 -$R 0) //1
    ($R  0 0) //2
    (0  $R 0) //3

    // Верхнее основание цилиндра
    (-$R 0 $H) //4
    (0 -$R $H) //5
    ($R  0 $H) //6
    (0  $R $H) //7
);

blocks
(
    // У каждого блока своя правая ортонормированная система координат
    hex (0 1 2 3 4 5 6 7) ($Nx $Ny $Nz) simpleGrading (1 1 1) // Блок '0'
);

edges
(
    // При описании точек на дугах окружности
    // Порядок перечисления точек, как при обходе против часовой стрелки

    // Пример:
    // arc 1 2 (0.1 0.2 0.3)
    // Эта строка означет, что точки с индексами '1' и '2'
    // Нужно соединить не отрезком (по умолчанию), а другой окружности
    // Дуга должна соединять точки '1' и '2' и проходить через точку
    // С координатами (0.1 0.2 0.3)

    // Дуги нижнего внешнего цилиндра
    arc 0 1 ( -$arc_R  -$arc_R 0)
    arc 1 2 ( $arc_R   -$arc_R 0)
    arc 2 3 ( $arc_R    $arc_R 0)
    arc 3 0 ( -$arc_R   $arc_R 0)

    // Дуги верхнего внешнего цилиндра
    arc 4 5 ( -$arc_R   -$arc_R $H)
    arc 5 6 ( $arc_R    -$arc_R $H)
    arc 6 7 ( $arc_R     $arc_R $H)
    arc 7 4 ( -$arc_R    $arc_R $H)

);

// Описание (именование) участков границы
boundary
(
    // Внешняя боковая поверхность
    sideWall
    {
        //type wall; // Тип участка гарницы
        type patch; // Тип участка гарницы
        faces // Список граней, входящих в данный участок
        (
            (4 0 1 5)
            (5 1 2 6)
            (6 2 3 7)
            (7 3 0 4)
        );
    }

    // Нижнее основание
    bottomBase
    {
        //type wall;
        type patch;
        faces
        (
            (3 2 1 0)
        );
    }
    // Верхнее основание
    topBase
    {
        //type wall;
        type patch;
        faces
        (
            (4 5 6 7)
        );
    }

);


// ************************************************************************* //
